(this["webpackJsonpqr-code-menu"]=this["webpackJsonpqr-code-menu"]||[]).push([[0],{161:function(e,t,n){},203:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),i=n(53),s=n.n(i),r=(n(161),n(9)),o=n(52),j=n(25),l=n(301),d=n(249),u=n(0);function b(){return Object(u.jsx)("div",{})}var O=n(250),x=n(255),m=n(256),h=n(257),p=n(291),f=n(94),g=n(280),v=n(298),y=n(292),C=n(135),w=n(294);function I(e){var t=e.path,n=e.text,a=e.startIcon;return Object(u.jsx)(p.a,{startIcon:a,children:Object(u.jsx)(o.b,{to:t,style:{textDecoration:"none",color:"black"},children:n})})}var S=function(e){var t=e.customerId,n=e.authService,c=e.menuRepository,i=Object(j.f)(),s=Object(a.useContext)(dt).user,o=Object(a.useState)(null),l=Object(r.a)(o,2),b=l[0],S=l[1],k=Object(a.useState)({}),P=Object(r.a)(k,2),W=P[0],R=P[1];return Object(a.useEffect)((function(){c.getCustomerInfo(t,(function(e){e&&R(e)}))}),[t,c]),Object(u.jsxs)("div",{children:[Object(u.jsxs)(d.a,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",height:"50px",m:2,ml:3,flexWrap:"wrap"},children:[Object(u.jsx)(d.a,{children:Object(u.jsx)(p.a,{sx:{color:"black"},startIcon:Object(u.jsx)(O.a,{}),onClick:function(){i("/editor")},children:Object(u.jsx)(f.a,{children:"Pairable"})})}),s&&s?Object(u.jsxs)(d.a,{children:[Object(u.jsx)(g.a,{title:"Open Setting",children:Object(u.jsx)(v.a,{onClick:function(e){S(e.currentTarget)},children:Object(u.jsx)(y.a,{variant:"rounded",src:W&&W.logo})})}),Object(u.jsxs)(C.a,{anchorEl:b,open:Boolean(b),onClose:function(){S(null)},children:[Object(u.jsxs)(w.a,{onClick:function(){i("/profile"),S(null)},children:[Object(u.jsx)(v.a,{children:Object(u.jsx)(x.a,{})}),Object(u.jsx)(f.a,{children:"Profile"})]}),Object(u.jsxs)(w.a,{onClick:function(){i("/editor"),S(null)},children:[Object(u.jsx)(v.a,{children:Object(u.jsx)(m.a,{})}),Object(u.jsx)(f.a,{children:"Menu Editor"})]}),Object(u.jsxs)(w.a,{onClick:function(){i("/preview"),S(null)},children:[Object(u.jsx)(v.a,{children:Object(u.jsx)(O.a,{})}),Object(u.jsx)(f.a,{children:"Menu Preview"})]}),Object(u.jsxs)(w.a,{onClick:function(){n.logout().then((function(){i("/login")})).catch((function(e){console.log(e)}))},children:[Object(u.jsx)(v.a,{children:Object(u.jsx)(h.a,{})}),Object(u.jsx)(f.a,{children:"Sign Out"})]})]})]}):Object(u.jsx)(d.a,{children:Object(u.jsx)(I,{path:"/login",text:"Sign In"})})]}),Object(u.jsx)("hr",{})]})};var k=function(e){var t=e.customerId,n=e.menuRepository,c=e.authService,i=e.component,s=Object(a.useContext)(dt),r=s.user,o=s.setUser,O=Object(j.f)();return Object(a.useEffect)((function(){c.onAuthChange((function(e){e?o(e):(o(void 0),O("/login"))}))})),Object(u.jsx)(u.Fragment,{children:r&&Object(u.jsxs)(l.a,{maxWidth:"xl",children:[Object(u.jsx)(d.a,{sx:{mb:4},children:Object(u.jsx)(S,{customerId:t,authService:c,menuRepository:n})}),Object(u.jsx)(d.a,{children:i}),Object(u.jsx)(d.a,{sx:{mb:8},children:Object(u.jsx)(b,{})})]})})},P=n(268),W=n(269),R=n(295),E=n(308),B=n(288),M=n(132),N=n.n(M),A=n(282),U=n(302);var L=function(e){var t=e.category,n=e.categories,a=e.handleTabChange;return Object(u.jsx)(A.a,{value:t,onChange:a,variant:"scrollable",scrollButtons:"auto",children:n.map((function(e){return Object(u.jsx)(U.a,{label:e,value:e},e)}))})},F=n(267),D=n(264),z=n(265),$=n(266),q=n(303),T=n(304),H=n(305),V=n(306),J=n(263),_=n(287),G=n(258),Y=n(307),K=n(259),Z=n(260),Q=n(261),X=n(300),ee=n(262);var te=function(e){var t=e.menu;return Object(u.jsx)(X.a,{sx:{pl:4},dense:!0,children:Object(u.jsxs)(_.a,{children:["high"===t.rate?Object(u.jsx)(G.a,{children:Object(u.jsx)(K.a,{})}):"mid"===t.rate?Object(u.jsx)(G.a,{children:Object(u.jsx)(Z.a,{})}):"low"===t.rate?Object(u.jsx)(G.a,{children:Object(u.jsx)(Q.a,{})}):null,Object(u.jsx)(ee.a,{sx:{width:"50%"},primary:t.name,secondary:t.desc}),Object(u.jsx)(ee.a,{sx:{width:"50%",textAlign:"right"},primary:Object(u.jsxs)(f.a,{variant:"subtitle2",children:["$",t.price,t.priceB&&" / $".concat(t.priceB)]})})]})})};var ne=function(e){var t=e.menu,n=e.menus,c=e.type,i=Object(a.useState)(!1),s=Object(r.a)(i,2),o=s[0],j=s[1];return Object(u.jsxs)(q.a,{sx:{width:"100%"},children:["edit"===c?Object(u.jsx)(T.a,{title:t.name,subheader:Object(u.jsxs)(f.a,{sx:{mt:1},variant:"subtitle2",children:["$",t.price,t.priceB&&" / $".concat(t.priceB)]})}):Object(u.jsx)(T.a,{title:t.name,action:Object(u.jsxs)(f.a,{sx:{mt:1.5,ml:1},variant:"subtitle2",children:["$",t.price,t.priceB&&" / $".concat(t.priceB)]})}),t.img&&Object(u.jsx)(H.a,{component:"img",height:"150",image:t.img,alt:"No Image"}),Object(u.jsx)(V.a,{children:Object(u.jsx)(f.a,{variant:"body2",color:"text.secondary",children:t.desc})}),t.pairs&&t.pairs.length>0&&Object(u.jsxs)(J.a,{onClick:function(){j(!o)},children:[Object(u.jsx)(_.a,{secondaryAction:Object(u.jsx)(f.a,{variant:"body2",children:"Best Paired With"}),children:Object(u.jsxs)(G.a,{children:[Object(u.jsx)(O.a,{}),Object(u.jsx)(D.a,{})]})}),o?Object(u.jsx)(z.a,{}):Object(u.jsx)($.a,{})]}),Object(u.jsx)(Y.a,{in:o,timeout:"auto",unmountOnExit:!0,children:t.pairs&&t.pairs.map((function(e){return Object(u.jsx)(te,{menu:n[e]},e)}))})]})};var ae=function(e){var t=e.menus,n=Object(a.useState)(t.categoryOrder[0]),c=Object(r.a)(n,2),i=c[0],s=c[1];return Object(u.jsxs)(R.a,{container:!0,item:!0,justifyContent:"center",xs:10,children:[Object(u.jsx)(R.a,{item:!0,xs:12,sx:{mb:4},children:Object(u.jsx)(F.a,{sx:{display:"flex",justifyContent:"center"},children:Object(u.jsx)(L,{category:i,categories:t.categoryOrder,handleTabChange:function(e,t){s(t)}})})}),Object(u.jsx)(R.a,{container:!0,justifyContent:"center",children:Object(u.jsx)(R.a,{item:!0,container:!0,xs:10,spacing:2,justifyContent:"flex-start",alignItems:"flex-start",children:i&&t.categories[i].menuOrder&&t.categories[i].menuOrder.map((function(e){return Object(u.jsx)(R.a,{item:!0,xs:12,md:6,lg:4,xl:3,children:Object(u.jsx)(ne,{menu:t.items[e],menus:t.items,type:"menu"},e)},e)}))})})]})};function ce(e){var t=e.menu,n=e.menus,c=Object(a.useState)(!1),i=Object(r.a)(c,2),s=i[0],o=i[1];return Object(u.jsxs)(X.a,{children:[Object(u.jsxs)(_.a,{children:[Object(u.jsx)(ee.a,{sx:{width:"50%"},primary:t.name,secondary:t.desc}),Object(u.jsx)(ee.a,{sx:{width:"50%",textAlign:"right"},primary:Object(u.jsxs)(f.a,{variant:"subtitle2",children:["$",t.price,t.priceB&&" / $".concat(t.priceB)]})})]}),t.pairs?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)(J.a,{onClick:function(){o(!s)},children:[Object(u.jsx)(_.a,{secondaryAction:Object(u.jsx)(f.a,{variant:"body2",children:"Best Paired With"}),children:Object(u.jsxs)(G.a,{children:[Object(u.jsx)(O.a,{}),Object(u.jsx)(D.a,{})]})}),s?Object(u.jsx)(z.a,{}):Object(u.jsx)($.a,{})]}),Object(u.jsx)(Y.a,{sx:{borderBottom:"1px solid",borderRadius:4},in:s,timeout:"auto",unmountOnExit:!0,children:t.pairs&&t.pairs.map((function(e){return Object(u.jsx)(te,{menu:n[e]},e)}))})]}):null]})}var ie=function(e){var t=e.menus,n=e.category;return e.menuRepository,e.customerId,Object(u.jsx)(u.Fragment,{children:t.categories[n].menuOrder&&t.categories[n].menuOrder.map((function(e){return Object(u.jsx)(ce,{menus:t.items,menu:t.items[e]},e)}))})};function se(e){var t=e.menus;return Object(u.jsx)(R.a,{item:!0,container:!0,justifyContent:"center",xs:10,sm:8,md:6,lg:6,xl:4,children:t.categoryOrder.map((function(e){return Object(u.jsxs)(R.a,{item:!0,container:!0,direction:"column",children:[Object(u.jsx)(R.a,{item:!0,children:Object(u.jsx)(f.a,{variant:"h5",children:e})}),Object(u.jsx)(R.a,{item:!0,children:Object(u.jsx)(ie,{menus:t,category:e})})]},e)}))})}var re=function(e){var t=e.customerId,n=e.menuRepository,c=Object(a.useState)({}),i=Object(r.a)(c,2),s=i[0],o=i[1],j=Object(a.useState)(!0),l=Object(r.a)(j,2),d=l[0],b=l[1];return Object(a.useEffect)((function(){n.getCustomerInfo(t,(function(e){e&&o(e)}))}),[t,n]),Object(u.jsxs)(R.a,{container:!0,item:!0,alignItems:"center",direction:"column",spacing:4,children:[Object(u.jsx)(R.a,{item:!0,children:Object(u.jsx)(f.a,{variant:"h5",children:"Menu Preview"})}),Object(u.jsx)(R.a,{container:!0,item:!0,children:Object(u.jsxs)(R.a,{item:!0,container:!0,direction:"column",alignItems:"center",spacing:1,children:[Object(u.jsx)(R.a,{item:!0,children:Object(u.jsx)(N.a,{id:"qr-code",value:"https://pairable.menu/#/menu/".concat(s.publicUrl)})}),Object(u.jsx)(R.a,{item:!0,children:Object(u.jsx)(p.a,{variant:"contained",onClick:function(){var e=document.getElementById("qr-code").toDataURL("image/png"),t=document.createElement("a");t.href=e,t.download="Pairable-Menu-QR-Code.png",document.body.appendChild(t),t.click(),document.body.removeChild(t)},children:"QR Code Download"})}),Object(u.jsx)(R.a,{item:!0,children:Object(u.jsx)(f.a,{children:"Share this Public Link on social media or with anyone"})}),Object(u.jsx)(R.a,{item:!0,children:Object(u.jsx)(E.a,{target:"_blank",href:"/#/menu/".concat(s.publicUrl),children:"https://pairable.menu/#/menu/".concat(s.publicUrl)})})]})}),Object(u.jsxs)(R.a,{item:!0,container:!0,justifyContent:"center",alignItems:"center",children:[s.logo&&Object(u.jsx)(R.a,{item:!0,sx:{mr:2},children:Object(u.jsx)("img",{src:s.logo,alt:"",loading:"lazy",style:{width:"80px",height:"80px",borderRadius:4}})}),Object(u.jsx)(R.a,{item:!0,children:Object(u.jsx)(f.a,{variant:"h4",children:s.name})})]}),Object(u.jsxs)(R.a,{item:!0,container:!0,justifyContent:"center",alignItems:"center",children:[Object(u.jsx)(R.a,{item:!0,children:Object(u.jsx)(P.a,{})}),Object(u.jsx)(R.a,{item:!0,children:Object(u.jsx)(B.a,{checked:d,onChange:function(e){b(!d)}})}),Object(u.jsx)(R.a,{item:!0,children:Object(u.jsx)(W.a,{})})]}),Object(u.jsx)(R.a,{container:!0,item:!0,justifyContent:"center",xs:10,children:Object.keys(s).find((function(e){return"menus"===e}))?d?Object(u.jsx)(ae,{menus:s.menus},Date.now()):Object(u.jsx)(se,{menus:s.menus}):Object(u.jsx)(R.a,{item:!0,children:"No Data Available"})})]})},oe=n(312),je=n(271),le=n(281),de=n(283),ue=n(289);function be(e){var t=e.authService,n=e.setForgotPassword,c=Object(a.useState)(),i=Object(r.a)(c,2),s=i[0],o=i[1],j=Object(a.useState)(),l=Object(r.a)(j,2),d=l[0],b=l[1],O=Object(a.useState)(!1),x=Object(r.a)(O,2),m=x[0],h=x[1];return Object(u.jsx)(R.a,{container:!0,justifyContent:"center",children:Object(u.jsxs)(R.a,{container:!0,item:!0,direction:"column",justifyContent:"space-around",spacing:2,sx:{p:4,maxWidth:"400px"},children:[Object(u.jsx)(R.a,{item:!0,container:!0,justifyContent:"center",children:Object(u.jsx)(R.a,{item:!0,children:Object(u.jsx)(f.a,{variant:"h5",children:"Reset Password"})})}),d?Object(u.jsx)(R.a,{item:!0,children:Object(u.jsx)(de.a,{severity:d.type,children:d.msg})}):Object(u.jsx)(R.a,{item:!0,children:Object(u.jsx)(f.a,{variant:"subtitle2",children:"Enter the email address you used to register with Pairable and we'll send you instructions to reset your password."})}),Object(u.jsx)(R.a,{item:!0,children:Object(u.jsx)(ue.a,{autoFocus:!0,fullWidth:!0,type:"email",variant:"outlined",label:"Email",name:"email",onChange:function(e){o(e.target.value)}})}),Object(u.jsx)(R.a,{item:!0,container:!0,justifyContent:"center",children:Object(u.jsx)(R.a,{item:!0,xs:12,children:Object(u.jsx)(le.a,{loading:m,fullWidth:!0,variant:"contained",size:"large",onClick:function(){h(!0),t.sendPasswordResetEmail(s).then((function(){b({type:"success",msg:"We just sent you an updated password reset link. If you don't see it in your inbox, remember to check your spam folder."}),h(!1)})).catch((function(e){if("auth/user-not-found"===e.code)return b({type:"error",msg:"User is not found"}),void h(!1);b(e.message),h(!1)}))},children:"Send Instruction"})})}),Object(u.jsx)(R.a,{item:!0,container:!0,justifyContent:"center",children:Object(u.jsx)(R.a,{item:!0,children:Object(u.jsx)(p.a,{onClick:function(){n(!1)},children:"Back to login"})})})]})})}var Oe=function(e){var t=e.authService,n=e.setForgotPassword,c=e.setSignUp,i=Object(a.useState)(""),s=Object(r.a)(i,2),o=s[0],j=s[1],l=Object(a.useState)(""),d=Object(r.a)(l,2),b=d[0],O=d[1],x=Object(a.useState)(!1),m=Object(r.a)(x,2),h=m[0],g=m[1],v=Object(a.useState)(),y=Object(r.a)(v,2),C=y[0],w=y[1],I=function(e){var t=e.target.name,n=e.target.value;switch(t){case"email":return void j(n);case"password":return void O(n);default:return}},S=function(e){"Enter"!==e.key||k()},k=function(){t.signInWithEmailPassword(o,b).then().catch((function(e){"auth/user-not-found"===e.code?(g("email"),w("User is not found")):"auth/wrong-password"===e.code?(g("password"),w("Incorrect password")):"auth/too-many-requests"===e.code?(g("tooManyRequest"),w("Access to this account has been temporarily disabled due to many failed login attempts. You can immediately restore it by resetting your password or you can try again later.")):console.log(e)}))};return Object(u.jsx)(R.a,{container:!0,justifyContent:"center",children:Object(u.jsxs)(R.a,{container:!0,item:!0,direction:"column",justifyContent:"space-around",spacing:2,sx:{p:4,maxWidth:"400px"},children:[C&&Object(u.jsx)(R.a,{item:!0,children:Object(u.jsx)(de.a,{severity:"error",children:C})}),Object(u.jsx)(R.a,{item:!0,children:Object(u.jsx)(f.a,{children:"Email"})}),Object(u.jsx)(R.a,{item:!0,children:Object(u.jsx)(ue.a,{error:"email"===h&&!0,helperText:"email"===h&&"Incorrect entry",autoFocus:!0,fullWidth:!0,type:"email",variant:"outlined",label:"Email",name:"email",onChange:I,onKeyPress:S})}),Object(u.jsx)(R.a,{item:!0,children:Object(u.jsx)(f.a,{children:"Password"})}),Object(u.jsx)(R.a,{item:!0,children:Object(u.jsx)(ue.a,{error:"password"===h&&!0,helperText:"password"===h&&"Incorrect entry",fullWidth:!0,variant:"outlined",label:"Password",type:"password",name:"password",onChange:I,onKeyPress:S})}),Object(u.jsxs)(R.a,{item:!0,container:!0,justifyContent:"space-around",children:[Object(u.jsx)(R.a,{item:!0,children:Object(u.jsx)(p.a,{onClick:function(){n(!0)},children:"Forgot password?"})}),Object(u.jsx)(R.a,{item:!0,children:Object(u.jsx)(p.a,{onClick:function(){c(!0)},children:"Don't have an account? Sign up"})})]}),Object(u.jsx)(R.a,{item:!0,container:!0,justifyContent:"center",children:Object(u.jsx)(R.a,{item:!0,xs:12,children:Object(u.jsx)(p.a,{fullWidth:!0,variant:"contained",size:"large",onClick:k,children:"Log in"})})})]})})};function xe(e){var t=e.authService,n=e.menuRepository,c=e.setSignUp,i=Object(a.useState)(),s=Object(r.a)(i,2),o=s[0],j=s[1],l=Object(a.useState)(),d=Object(r.a)(l,2),b=d[0],O=d[1],x=Object(a.useState)(),m=Object(r.a)(x,2),h=m[0],g=m[1],v=Object(a.useState)({type:"",msg:""}),y=Object(r.a)(v,2),C=y[0],w=y[1],I=Object(a.useState)(!1),S=Object(r.a)(I,2),k=S[0],P=S[1];function W(e){var t=e.target.name,n=e.target.value;switch(t){case"email":return void j(n);case"confirmEmail":return void O(n);case"password":return void g(n);default:return}}return Object(u.jsx)(R.a,{container:!0,justifyContent:"center",children:Object(u.jsxs)(R.a,{container:!0,item:!0,direction:"column",justifyContent:"space-around",spacing:2,sx:{p:4,maxWidth:"400px"},children:[Object(u.jsx)(R.a,{item:!0,container:!0,justifyContent:"center",children:Object(u.jsx)(R.a,{item:!0,children:Object(u.jsx)(f.a,{variant:"h5",children:"Sign Up"})})}),C.type&&Object(u.jsx)(R.a,{item:!0,children:Object(u.jsx)(de.a,{severity:C.type,children:C.msg})}),Object(u.jsx)(R.a,{item:!0,children:Object(u.jsx)(f.a,{children:"Enter your email"})}),Object(u.jsx)(R.a,{item:!0,children:Object(u.jsx)(ue.a,{autoFocus:!0,fullWidth:!0,type:"email",variant:"outlined",label:"Email",name:"email",onChange:W})}),Object(u.jsx)(R.a,{item:!0,children:Object(u.jsx)(f.a,{children:"Confirm your email"})}),Object(u.jsx)(R.a,{item:!0,children:Object(u.jsx)(ue.a,{error:"The email address you entered do not match"===C.msg&&!0,helperText:"The email address you entered do not match"===C.msg&&"Incorrect entry",autoFocus:!0,fullWidth:!0,type:"email",variant:"outlined",label:"Confirm Email",name:"confirmEmail",onChange:W})}),Object(u.jsx)(R.a,{item:!0,children:Object(u.jsx)(f.a,{children:"Create a password"})}),Object(u.jsx)(R.a,{item:!0,children:Object(u.jsx)(ue.a,{fullWidth:!0,variant:"outlined",label:"Password",type:"password",name:"password",onChange:W})}),Object(u.jsx)(R.a,{item:!0,container:!0,justifyContent:"center",children:Object(u.jsx)(R.a,{item:!0,xs:12,children:Object(u.jsx)(le.a,{loading:k,fullWidth:!0,variant:"contained",size:"large",onClick:function(){if(P(!0),o!==b)return w({type:"error",msg:"The email address you entered do not match"}),void P(!1);t.createUserWithEmailAndPassword(o,h).then((function(e){var t=e.user.uid;n.addCustomerInfo(t,{name:"My Business",publicUrl:t})})).catch((function(e){"auth/email-already-in-use"===e.code?(w({type:"error",msg:"The email is already in use"}),P(!1)):(w({type:"error",msg:e.message}),P(!1))}))},children:"Sign Up"})})}),Object(u.jsx)(R.a,{item:!0,container:!0,justifyContent:"center",children:Object(u.jsx)(R.a,{item:!0,children:Object(u.jsx)(p.a,{onClick:function(){c(!1)},children:"Back to login"})})})]})})}var me=function(e){var t=e.authService,n=e.menuRepository,c=Object(a.useState)(),i=Object(r.a)(c,2),s=i[0],o=i[1],l=Object(a.useState)(),d=Object(r.a)(l,2),b=d[0],x=d[1],m=Object(a.useContext)(dt).setUser,h=Object(j.f)();return Object(a.useEffect)((function(){t.onAuthChange((function(e){e?h("/editor"):m(void 0)}))})),Object(u.jsxs)(oe.a,{open:!0,maxWidth:"xs",fullWidth:!0,children:[Object(u.jsx)(je.a,{sx:{textAlign:"center",fontSize:24,fontWeight:"bold"},children:Object(u.jsx)(p.a,{sx:{color:"black"},startIcon:Object(u.jsx)(O.a,{}),onClick:function(){h("/")},children:Object(u.jsx)(f.a,{children:"Pairable"})})}),s?Object(u.jsx)(be,{authService:t,setForgotPassword:o}):b?Object(u.jsx)(xe,{authService:t,menuRepository:n,setSignUp:x}):Object(u.jsx)(Oe,{authService:t,setForgotPassword:o,setSignUp:x})]})},he=n(8),pe=n(272);var fe=function(e){var t=e.menuRepository,n=e.customerId,c=e.menuId,i=e.menu,s=e.menus,o=e.type,j=e.editMenu,l=e.deleteMenu,b=Object(a.useState)(!1),x=Object(r.a)(b,2),h=x[0],p=x[1];return Object(u.jsxs)(q.a,{sx:{width:"100%"},children:["edit"===o?Object(u.jsx)(T.a,{title:i.name,subheader:Object(u.jsxs)(f.a,{sx:{mt:1},variant:"subtitle2",children:["$",i.price,i.priceB&&" / $".concat(i.priceB)]}),action:Object(u.jsxs)(d.a,{sx:{ml:1},children:[Object(u.jsx)(v.a,{onClick:function(){j(i.menuId)},children:Object(u.jsx)(m.a,{})}),Object(u.jsx)(v.a,{onClick:function(){l(i.menuId)},children:Object(u.jsx)(pe.a,{})})]})}):Object(u.jsx)(T.a,{title:i.name,action:Object(u.jsxs)(f.a,{sx:{mt:1.5,ml:1},variant:"subtitle2",children:["$",i.price,i.priceB&&" / $".concat(i.priceB)]})}),i.img&&Object(u.jsx)(H.a,{component:"img",height:"150",image:i.img,alt:"No Image"}),Object(u.jsx)(V.a,{children:Object(u.jsx)(f.a,{variant:"body2",color:"text.secondary",children:i.desc})}),i.pairs&&i.pairs.length>0&&Object(u.jsxs)(J.a,{onClick:function(){p(!h),t.getMenu(n,c,(function(e){var a;a=e.pairClicks?e.pairClicks+1:1,t.updateMenu(n,c,Object(he.a)(Object(he.a)({},e),{},{pairClicks:a}))}))},children:[Object(u.jsx)(_.a,{secondaryAction:Object(u.jsx)(f.a,{variant:"body2",children:"Best Paired With"}),children:Object(u.jsxs)(G.a,{children:[Object(u.jsx)(O.a,{}),Object(u.jsx)(D.a,{})]})}),h?Object(u.jsx)(z.a,{}):Object(u.jsx)($.a,{})]}),Object(u.jsx)(Y.a,{in:h,timeout:"auto",unmountOnExit:!0,children:i.pairs&&i.pairs.map((function(e){return Object(u.jsx)(te,{menu:s[e]},e)}))})]})};var ge=function(e){var t=e.menus,n=e.menuRepository,c=e.customerId,i=Object(a.useState)(t.categoryOrder[0]),s=Object(r.a)(i,2),o=s[0],j=s[1];return Object(u.jsxs)(R.a,{container:!0,item:!0,justifyContent:"center",xs:10,children:[Object(u.jsx)(R.a,{item:!0,xs:12,sx:{mb:4},children:Object(u.jsx)(F.a,{sx:{display:"flex",justifyContent:"center"},children:Object(u.jsx)(L,{category:o,categories:t.categoryOrder,handleTabChange:function(e,t){j(t)}})})}),Object(u.jsx)(R.a,{container:!0,justifyContent:"center",children:Object(u.jsx)(R.a,{item:!0,container:!0,xs:10,spacing:2,justifyContent:"flex-start",alignItems:"flex-start",children:o&&t.categories[o].menuOrder&&t.categories[o].menuOrder.map((function(e){return Object(u.jsx)(R.a,{item:!0,xs:12,md:6,lg:4,xl:3,children:Object(u.jsx)(fe,{menuRepository:n,customerId:c,menuId:e,menu:t.items[e],menus:t.items,type:"menu"},e)},e)}))})})]})};function ve(e){var t=e.menu,n=e.menus,c=e.menuId,i=e.menuRepository,s=e.customerId,o=Object(a.useState)(!1),j=Object(r.a)(o,2),l=j[0],d=j[1];return Object(u.jsxs)(X.a,{children:[Object(u.jsxs)(_.a,{children:[Object(u.jsx)(ee.a,{sx:{width:"50%"},primary:t.name,secondary:t.desc}),Object(u.jsx)(ee.a,{sx:{width:"50%",textAlign:"right"},primary:Object(u.jsxs)(f.a,{variant:"subtitle2",children:["$",t.price,t.priceB&&" / $".concat(t.priceB)]})})]}),t.pairs?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)(J.a,{onClick:function(){d(!l),i.getMenu(s,c,(function(e){var t;t=e.pairClicks?e.pairClicks+1:1,i.updateMenu(s,c,Object(he.a)(Object(he.a)({},e),{},{pairClicks:t}))}))},children:[Object(u.jsx)(_.a,{secondaryAction:Object(u.jsx)(f.a,{variant:"body2",children:"Best Paired With"}),children:Object(u.jsxs)(G.a,{children:[Object(u.jsx)(O.a,{}),Object(u.jsx)(D.a,{})]})}),l?Object(u.jsx)(z.a,{}):Object(u.jsx)($.a,{})]}),Object(u.jsx)(Y.a,{sx:{borderBottom:"1px solid",borderRadius:4},in:l,timeout:"auto",unmountOnExit:!0,children:t.pairs&&t.pairs.map((function(e){return Object(u.jsx)(te,{menu:n[e]},e)}))})]}):null]})}var ye=function(e){var t=e.menus,n=e.category,a=e.menuRepository,c=e.customerId;return Object(u.jsx)(u.Fragment,{children:t.categories[n].menuOrder&&t.categories[n].menuOrder.map((function(e){return Object(u.jsx)(ve,{menuId:e,menus:t.items,menu:t.items[e],menuRepository:a,customerId:c},e)}))})};function Ce(e){var t=e.menus,n=e.menuRepository,a=e.customerId;return Object(u.jsx)(R.a,{item:!0,container:!0,justifyContent:"center",xs:10,sm:8,md:6,lg:6,xl:4,children:t.categoryOrder.map((function(e){return Object(u.jsxs)(R.a,{item:!0,container:!0,direction:"column",children:[Object(u.jsx)(R.a,{item:!0,children:Object(u.jsx)(f.a,{variant:"h5",children:e})}),Object(u.jsx)(R.a,{item:!0,children:Object(u.jsx)(ye,{menus:t,category:e,menuRepository:n,customerId:a})})]},e)}))})}var we=function(e){var t=e.menuRepository,n=e.customerId,c=e.menus,i=e.logo,s=e.name,o=Object(a.useState)(!0),j=Object(r.a)(o,2),l=j[0],b=j[1];return Object(u.jsx)(d.a,{sx:{mt:4,mb:8},children:Object(u.jsxs)(R.a,{container:!0,alignItems:"center",direction:"column",spacing:4,children:[Object(u.jsxs)(R.a,{item:!0,container:!0,justifyContent:"center",alignItems:"center",spacing:2,children:[i&&Object(u.jsx)(R.a,{item:!0,children:Object(u.jsx)("img",{src:i,alt:"",loading:"lazy",style:{width:"80px",height:"80px",borderRadius:4}})}),Object(u.jsx)(R.a,{item:!0,children:Object(u.jsx)(f.a,{variant:"h4",children:s})})]}),Object(u.jsxs)(R.a,{item:!0,container:!0,justifyContent:"center",alignItems:"center",children:[Object(u.jsx)(R.a,{item:!0,children:Object(u.jsx)(P.a,{})}),Object(u.jsx)(R.a,{item:!0,children:Object(u.jsx)(B.a,{checked:l,onChange:function(e){b(!l)}})}),Object(u.jsx)(R.a,{item:!0,children:Object(u.jsx)(W.a,{})})]}),Object(u.jsx)(R.a,{container:!0,item:!0,justifyContent:"center",xs:10,children:c?l?Object(u.jsx)(ge,{menus:c,menuRepository:t,customerId:n},Date.now()):Object(u.jsx)(Ce,{menus:c,menuRepository:t,customerId:n}):Object(u.jsx)(R.a,{item:!0,children:"No Data Available"})})]})})},Ie=n(4),Se=n.n(Ie),ke=n(6),Pe=n(273),We=n(274),Re=n(309),Ee=n(313),Be=n(314),Me=n(315),Ne=n(286);function Ae(e){var t=e.open,n=e.setDeleteAlertOpen,a=e.deleteFn,c=e.text;function i(){n(!1)}return Object(u.jsxs)(oe.a,{open:t,onClose:i,children:[Object(u.jsx)(je.a,{children:"Delete"}),Object(u.jsx)(Ee.a,{children:Object(u.jsx)(Be.a,{children:c})}),Object(u.jsxs)(Me.a,{children:[Object(u.jsx)(p.a,{onClick:i,children:"Cancel"}),Object(u.jsx)(p.a,{variant:"contained",color:"error",startIcon:Object(u.jsx)(pe.a,{}),onClick:function(){a(),n(!1)},children:"Delete"})]})]})}function Ue(e){var t=e.user,n=e.customerId,c=e.menuRepository,i=e.imageRepository,s=e.authService,j=Object(a.useState)(),l=Object(r.a)(j,2),d=l[0],b=l[1],O=Object(a.useState)(),x=Object(r.a)(O,2),m=x[0],h=x[1],g=Object(a.useState)(),v=Object(r.a)(g,2),y=v[0],C=v[1],w=Object(a.useState)(),I=Object(r.a)(w,2),S=I[0],k=I[1],P=Object(a.useState)(!0),W=Object(r.a)(P,2),E=W[0],B=W[1],M=Object(a.useState)(),N=Object(r.a)(M,2),A=N[0],U=N[1],L=Object(a.useState)(!1),F=Object(r.a)(L,2),D=F[0],z=F[1],$=Object(a.useState)({newPassword:"",confirmNewPassword:""}),q=Object(r.a)($,2),T=q[0],H=q[1],V=Object(a.useState)({type:"",msg:""}),J=Object(r.a)(V,2),_=J[0],G=J[1],Y=Object(a.useState)({type:"",msg:""}),K=Object(r.a)(Y,2),Z=K[0],Q=K[1],X=Object(a.useState)(!1),ee=Object(r.a)(X,2),te=ee[0],ne=ee[1],ae=Object(a.useState)(!1),ce=Object(r.a)(ae,2),ie=ce[0],se=ce[1];Object(a.useEffect)((function(){k(!0),c.getCustomerInfo(n,(function(e){if(e)return b(e),void k(!1);U(!0),k(!1)}))}),[c,n]);var re=function(){var e=Object(ke.a)(Se.a.mark((function e(){var t;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k(!0),!m.logo){e.next=13;break}return e.next=4,i.logoImageUpload(n,m.logo);case 4:return t=e.sent,c.updateCustomerInfo(n,Object(he.a)(Object(he.a)({},m),{},{logo:t.secure_url})),h(),k(!1),B(!0),ne(!0),Q({type:"success",msg:"Saved!"}),window.location.reload(),e.abrupt("return");case 13:c.updateCustomerInfo(n,m),h(),k(!1),B(!0),ne(!0),Q({type:"success",msg:"Saved!"}),window.location.reload();case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),be=function(){H({newPassword:"",confirmNewPassword:""}),G({type:"",msg:""}),z(!1)},Oe=function(e){var t=e.target.name,n=e.target.value;switch(t){case"newPassword":return void H(Object(he.a)(Object(he.a)({},T),{},{newPassword:n}));case"confirmNewPassword":return void H(Object(he.a)(Object(he.a)({},T),{},{confirmNewPassword:n}));default:return}},xe=function(e){B(!1);var t=e.target.name,n=e.target.value;switch(t){case"businessName":var a=n.replace(/\s/g,"-").toLowerCase();return void h(Object(he.a)(Object(he.a)({},m),{},{name:n,publicUrl:a}));case"businessDesc":return void h(Object(he.a)(Object(he.a)({},m),{},{desc:n}));case"addressLine1":return void h(Object(he.a)(Object(he.a)({},m),{},{address:Object(he.a)(Object(he.a)({},m.address),{},{addressLine1:n})}));case"addressLine2":return void h(Object(he.a)(Object(he.a)({},m),{},{address:Object(he.a)(Object(he.a)({},m.address),{},{addressLine2:n})}));case"city":return void h(Object(he.a)(Object(he.a)({},m),{},{address:Object(he.a)(Object(he.a)({},m.address),{},{city:n})}));case"state":return void h(Object(he.a)(Object(he.a)({},m),{},{address:Object(he.a)(Object(he.a)({},m.address),{},{state:n})}));case"zipCode":return void h(Object(he.a)(Object(he.a)({},m),{},{address:Object(he.a)(Object(he.a)({},m.address),{},{zipCode:n})}));case"phone":return void h(Object(he.a)(Object(he.a)({},m),{},{phone:n}));case"logo":return void h(Object(he.a)(Object(he.a)({},m),{},{logo:n}));case"website":return void h(Object(he.a)(Object(he.a)({},m),{},{website:n}));default:return}};return Object(u.jsxs)(R.a,{container:!0,justifyContent:"center",children:[Object(u.jsx)(R.a,{item:!0,xs:10,sx:{textAlign:"center"},children:Object(u.jsx)(f.a,{variant:"h5",children:"Profile"})}),!S&&d&&Object(u.jsxs)(R.a,{container:!0,item:!0,spacing:2,sx:{p:4,maxWidth:"800px"},children:[Object(u.jsx)(R.a,{item:!0,xs:12,children:Object(u.jsx)(f.a,{sx:{fontWeight:"bold"},children:"Business Name"})}),Object(u.jsx)(R.a,{item:!0,xs:12,children:Object(u.jsx)(ue.a,{disabled:S,fullWidth:!0,variant:"outlined",label:"Business Name",name:"businessName",onChange:xe,defaultValue:d.name})}),Object(u.jsx)(R.a,{item:!0,xs:12,children:Object(u.jsx)(f.a,{sx:{fontWeight:"bold"},children:"Business Description (Bio)"})}),Object(u.jsx)(R.a,{item:!0,xs:12,children:Object(u.jsx)(ue.a,{disabled:S,fullWidth:!0,variant:"outlined",label:"Business Description (Bio)",name:"businessDesc",onChange:xe,defaultValue:d.desc})}),Object(u.jsx)(R.a,{item:!0,xs:12,children:Object(u.jsx)(f.a,{sx:{fontWeight:"bold"},children:"Location"})}),Object(u.jsx)(R.a,{item:!0,xs:12,children:Object(u.jsx)(ue.a,{disabled:S,fullWidth:!0,variant:"outlined",label:"Address Line1",name:"addressLine1",onChange:xe,defaultValue:d.address&&d.address.addressLine1})}),Object(u.jsx)(R.a,{item:!0,xs:12,children:Object(u.jsx)(ue.a,{disabled:S,fullWidth:!0,variant:"outlined",label:"Address Line2",name:"addressLine2",onChange:xe,defaultValue:d.address&&d.address.addressLine2})}),Object(u.jsx)(R.a,{item:!0,xs:12,children:Object(u.jsx)(ue.a,{disabled:S,fullWidth:!0,variant:"outlined",label:"City",name:"city",onChange:xe,defaultValue:d.address&&d.address.city})}),Object(u.jsx)(R.a,{item:!0,xs:12,children:Object(u.jsx)(ue.a,{disabled:S,fullWidth:!0,variant:"outlined",label:"State",name:"state",onChange:xe,defaultValue:d.address&&d.address.state})}),Object(u.jsx)(R.a,{item:!0,xs:12,children:Object(u.jsx)(ue.a,{disabled:S,fullWidth:!0,variant:"outlined",label:"ZIP Code",name:"zipCode",onChange:xe,defaultValue:d.address&&d.address.zipCode})}),Object(u.jsx)(R.a,{item:!0,xs:12,children:Object(u.jsx)(f.a,{children:"Phone"})}),Object(u.jsx)(R.a,{item:!0,xs:12,children:Object(u.jsx)(ue.a,{disabled:S,fullWidth:!0,type:"tel",variant:"outlined",label:"Phone",name:"phone",onChange:xe,defaultValue:d.phone})}),Object(u.jsx)(R.a,{item:!0,xs:12,children:Object(u.jsx)(f.a,{sx:{fontWeight:"bold"},children:"Logo"})}),(y||d.logo)&&Object(u.jsx)(R.a,{container:!0,item:!0,xs:12,alignItems:"center",children:Object(u.jsx)(R.a,{item:!0,children:Object(u.jsx)("img",{src:y||d.logo,alt:"",loading:"lazy",style:{width:"200px",borderRadius:4}})})}),Object(u.jsx)(R.a,{item:!0,xs:12,children:Object(u.jsxs)("label",{htmlFor:"contained-button-file-logo",children:[Object(u.jsx)(Re.a,{sx:{display:"none"},type:"file",inputProps:{accept:"image/*"},id:"contained-button-file-logo",name:"img",onChange:function(e){var t=e.target.files[0];if(t){B(!0);var n=URL.createObjectURL(t);return C(n),h(Object(he.a)(Object(he.a)({},m),{},{logo:t})),void B(!1)}h(Object(he.a)(Object(he.a)({},m),{},{logo:""}))},disabled:S}),Object(u.jsx)(p.a,{variant:"contained",component:"span",startIcon:Object(u.jsx)(Pe.a,{}),disabled:S,children:"Upload Logo"})]})}),Object(u.jsx)(R.a,{item:!0,xs:12,children:Object(u.jsx)(f.a,{sx:{fontWeight:"bold"},children:"Business Hours"})}),Object(u.jsx)(R.a,{item:!0,xs:12,children:"business hours settings"}),Object(u.jsx)(R.a,{item:!0,xs:12,children:Object(u.jsx)(f.a,{sx:{fontWeight:"bold"},children:"Website"})}),Object(u.jsx)(R.a,{item:!0,xs:12,children:Object(u.jsx)(ue.a,{fullWidth:!0,type:"url",variant:"outlined",label:"Website",name:"website",onChange:xe,disabled:S,defaultValue:d.website})}),t&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(R.a,{item:!0,xs:12,children:Object(u.jsx)(f.a,{sx:{fontWeight:"bold"},children:"Email"})}),Object(u.jsx)(R.a,{item:!0,xs:12,children:Object(u.jsx)(ue.a,{disabled:!0,fullWidth:!0,variant:"outlined",type:"email",label:"Email",name:"email",defaultValue:t.email})}),Object(u.jsx)(R.a,{item:!0,xs:12,children:Object(u.jsx)(f.a,{sx:{fontWeight:"bold"},children:"Password"})}),Object(u.jsx)(R.a,{item:!0,xs:12,children:Object(u.jsx)(p.a,{variant:"contained",component:"span",disabled:S,onClick:function(){z(!0)},children:"Update Password"})}),Object(u.jsxs)(oe.a,{open:D,onClose:be,children:[Object(u.jsx)(je.a,{children:"Update Password"}),Object(u.jsxs)(Ee.a,{children:[Object(u.jsx)(Be.a,{}),_.type&&Object(u.jsx)(R.a,{item:!0,children:Object(u.jsx)(de.a,{severity:_.type,children:_.msg})}),Object(u.jsx)(ue.a,{sx:{mt:1},required:!0,type:"password",label:"New Password",name:"newPassword",value:T.newPassword,fullWidth:!0,onChange:Oe}),Object(u.jsx)(ue.a,{sx:{mt:1},required:!0,type:"password",label:"Confirm New Password",name:"confirmNewPassword",value:T.confirmNewPassword,fullWidth:!0,onChange:Oe})]}),Object(u.jsxs)(Me.a,{children:[Object(u.jsx)(p.a,{onClick:be,children:"Cancel"}),Object(u.jsx)(p.a,{onClick:function(){T.newPassword!==T.confirmNewPassword?G({type:"error",msg:"The new passwords you entered do not match"}):(G({type:"",msg:""}),s.updatePassword(T.newPassword).then((function(){z(!1),ne(!0),Q({type:"success",msg:"New password is updated successfully!"}),H({newPassword:"",confirmNewPassword:""})})).catch((function(e){"auth/requires-recent-login"!==e.code?"auth/weak-password"!==e.code?console.log(e):G({type:"error",msg:"Password should be at least 6 characters"}):G({type:"error",msg:"Please try to login again!"})})))},startIcon:Object(u.jsx)(We.a,{}),children:"Save"})]})]}),Object(u.jsx)(R.a,{item:!0,xs:12,children:Object(u.jsx)(f.a,{sx:{fontWeight:"bold"},children:"Delete Account"})}),Object(u.jsx)(R.a,{item:!0,xs:12,children:Object(u.jsx)(p.a,{variant:"contained",component:"span",color:"error",disabled:S,onClick:function(){se(!0)},children:"Delete Account"})}),Object(u.jsx)(Ae,{open:ie,setDeleteAlertOpen:se,deleteFn:function(){s.deleteUser().then((function(){})).catch(console.log)},text:"Are you sure you want to delete this account? the account won't be able to restored permanently."})]}),Object(u.jsx)(R.a,{item:!0,xs:12,children:Object(u.jsx)(le.a,{disabled:E,loading:S,fullWidth:!0,variant:"contained",startIcon:Object(u.jsx)(We.a,{}),onClick:re,children:"Save"})})]}),A&&Object(u.jsxs)(R.a,{item:!0,sx:{p:4},children:["This page will be available after your first menu is created. please follow this link to create your first menu (",Object(u.jsx)(o.b,{to:"/editor",children:"Menu Editor"}),")"]}),Z.type&&Object(u.jsx)(Ne.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:te,autoHideDuration:3e3,onClose:function(){ne(!1)},children:Object(u.jsx)(de.a,{severity:Z.type,children:Z.msg})})]})}var Le=n(2),Fe=n(276),De=n(277),ze=n(68);var $e=function(e){var t=e.open,n=e.setOpen,c=e.addCategory,i=Object(a.useState)("New Category"),s=Object(r.a)(i,2),o=s[0],j=s[1],l=function(){n(!1),j("New Category")};return Object(u.jsx)(R.a,{container:!0,item:!0,spacing:2,alignItems:"center",children:Object(u.jsxs)(oe.a,{open:t,onClose:l,children:[Object(u.jsx)(je.a,{children:"Add New Category"}),Object(u.jsxs)(Ee.a,{children:[Object(u.jsx)(Be.a,{}),Object(u.jsx)(ue.a,{sx:{mt:1},required:!0,autoFocus:!0,label:"Category",name:"category",value:o,fullWidth:!0,onChange:function(e){var t=e.target.value;j(t)}})]}),Object(u.jsxs)(Me.a,{children:[Object(u.jsx)(p.a,{onClick:l,children:"Cancel"}),Object(u.jsx)(p.a,{onClick:function(){c(o),n(!1),j("")},startIcon:Object(u.jsx)(We.a,{}),children:"Save"})]})]})})};var qe=function(e){var t=e.open,n=e.setOpen,c=e.category,i=e.editCategory,s=Object(a.useState)(c),o=Object(r.a)(s,2),j=o[0],l=o[1];Object(a.useEffect)((function(){l(c)}),[c]);var d=function(){l(c),n(!1)};return Object(u.jsx)(R.a,{container:!0,item:!0,spacing:2,alignItems:"center",children:Object(u.jsxs)(oe.a,{open:t,onClose:d,children:[Object(u.jsx)(je.a,{children:"Edit Category"}),Object(u.jsxs)(Ee.a,{children:[Object(u.jsx)(Be.a,{}),Object(u.jsx)(ue.a,{sx:{mt:1},required:!0,autoFocus:!0,label:"Category",name:"category",value:j,fullWidth:!0,onChange:function(e){var t=e.target.value;l(t)}})]}),Object(u.jsxs)(Me.a,{children:[Object(u.jsx)(p.a,{onClick:d,children:"Cancel"}),Object(u.jsx)(p.a,{onClick:function(){i(c,j),l(j),n(!1)},startIcon:Object(u.jsx)(We.a,{}),children:"Save"})]})]})})},Te=n(133);function He(e){var t=e.loading,n=e.text;return Object(u.jsxs)(d.a,{sx:{display:"flex",width:"100vw",height:"500px",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[Object(u.jsx)(d.a,{children:Object(u.jsx)(Te.CircleLoader,{loading:t,css:{display:"block"},size:100})}),Object(u.jsx)(d.a,{children:Object(u.jsx)(f.a,{variant:"h5",children:n})})]})}var Ve=n(23),Je=n(275),_e=n(316);function Ge(e){var t=e.open,n=e.setOpen,c=e.category,i=e.customerId,s=e.imageRepository,o=e.addMenu,j=e.menus,l=Object(a.useState)({name:"",rate:"none",price:"",priceB:"",img:"",desc:"",pairs:[]}),d=Object(r.a)(l,2),b=d[0],O=d[1],x=Object(a.useState)(j),m=Object(r.a)(x,2),h=m[0],f=m[1],g=Object(a.useState)(!1),v=Object(r.a)(g,2),y=v[0],C=v[1],I=Object(a.useState)(),S=Object(r.a)(I,2),k=S[0],P=S[1];function W(e){var t=e.target.name;if("img"!==t){var n=e.target.value;O(Object(he.a)(Object(he.a)({},b),{},Object(Le.a)({},t,n)))}else{var a=e.target.files[0];if(a){var c=URL.createObjectURL(a);P(a),O(Object(he.a)(Object(he.a)({},b),{},Object(Le.a)({},t,c)))}P("")}}function E(){n(!1)}function B(){return(B=Object(ke.a)(Se.a.mark((function e(){var t,a,r,j,l;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C(!0),!k){e.next=15;break}return e.next=4,s.imageUpload(i,k,[b.menuId,c,b.name]);case 4:return t=e.sent,a=Date.now().toString(),O(Object(he.a)(Object(he.a)({},b),{},{img:t.secure_url,menuId:a})),r=h.categories[c].menuOrder?Object(he.a)(Object(he.a)({},h),{},{categories:Object(he.a)(Object(he.a)({},h.categories),{},Object(Le.a)({},c,Object(he.a)(Object(he.a)({},h.categories[c]),{},{menuOrder:[].concat(Object(Ve.a)(h.categories[c].menuOrder),[a])}))),items:Object(he.a)(Object(he.a)({},h.items),{},Object(Le.a)({},a,Object(he.a)(Object(he.a)({},b),{},{menuId:a})))}):Object(he.a)(Object(he.a)({},h),{},{categories:Object(he.a)(Object(he.a)({},h.categories),{},Object(Le.a)({},c,Object(he.a)(Object(he.a)({},h.categories[c]),{},{menuOrder:[a]}))),items:Object(he.a)(Object(he.a)({},h.items),{},Object(Le.a)({},a,Object(he.a)(Object(he.a)({},b),{},{menuId:a})))}),f(r),o(r),O({name:"",rate:"none",price:"",priceB:"",desc:"",img:"",pairs:[]}),P(),C(!1),n(!1),e.abrupt("return");case 15:j=Date.now().toString(),O(Object(he.a)(Object(he.a)({},b),{},{menuId:j})),l=h.categories[c].menuOrder?Object(he.a)(Object(he.a)({},h),{},{categories:Object(he.a)(Object(he.a)({},h.categories),{},Object(Le.a)({},c,Object(he.a)(Object(he.a)({},h.categories[c]),{},{menuOrder:[].concat(Object(Ve.a)(h.categories[c].menuOrder),[j])}))),items:Object(he.a)(Object(he.a)({},h.items),{},Object(Le.a)({},j,Object(he.a)(Object(he.a)({},b),{},{menuId:j})))}):Object(he.a)(Object(he.a)({},h),{},{categories:Object(he.a)(Object(he.a)({},h.categories),{},Object(Le.a)({},c,Object(he.a)(Object(he.a)({},h.categories[c]),{},{menuOrder:[j]}))),items:Object(he.a)(Object(he.a)({},h.items),{},Object(Le.a)({},j,Object(he.a)(Object(he.a)({},b),{},{menuId:j})))}),f(l),o(l),O({name:"",rate:"none",price:"",priceB:"",desc:"",img:"",pairs:[]}),C(!1),n(!1);case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){f(j)}),[j]),Object(u.jsxs)(oe.a,{open:t,onClose:E,children:[Object(u.jsx)(je.a,{children:"Add New Menu"}),Object(u.jsxs)(Ee.a,{children:[Object(u.jsx)(Be.a,{}),Object(u.jsxs)(R.a,{sx:{mt:1},container:!0,item:!0,spacing:2,children:[Object(u.jsx)(R.a,{item:!0,xs:5,children:Object(u.jsx)(ue.a,{required:!0,label:"Menu name",name:"name",value:b.name,onChange:W,fullWidth:!0,disabled:y})}),Object(u.jsx)(R.a,{item:!0,xs:3,children:Object(u.jsxs)(ue.a,{select:!0,label:"Rate",name:"rate",value:b.rate,defaultValue:"none",onChange:W,fullWidth:!0,disabled:y,children:[Object(u.jsx)(w.a,{value:"none",children:"None"},"None"),Object(u.jsx)(w.a,{value:"high",children:"High"},"High"),Object(u.jsx)(w.a,{value:"mid",children:"Mid"},"Mid"),Object(u.jsx)(w.a,{value:"low",children:"Low"},"Low")]})}),Object(u.jsx)(R.a,{item:!0,xs:2,children:Object(u.jsx)(ue.a,{type:"number",label:"Price",name:"price",value:b.price,onChange:W,disabled:y,fullWidth:!0,InputProps:{startAdornment:Object(u.jsx)(_e.a,{position:"start",children:"$"})}})}),Object(u.jsx)(R.a,{item:!0,xs:2,children:Object(u.jsx)(ue.a,{type:"number",label:"Price(B)",name:"priceB",value:b.priceB,onChange:W,disabled:y,fullWidth:!0,InputProps:{startAdornment:Object(u.jsx)(_e.a,{position:"start",children:"$"})}})}),b.img&&Object(u.jsx)(R.a,{container:!0,item:!0,xs:12,justifyContent:"center",alignItems:"center",children:Object(u.jsx)(R.a,{item:!0,children:Object(u.jsx)("img",{src:b.img,alt:"",loading:"lazy",style:{width:"300px",borderRadius:4}})})}),Object(u.jsx)(R.a,{container:!0,item:!0,xs:12,justifyContent:"right",children:Object(u.jsx)(R.a,{item:!0,children:Object(u.jsxs)("label",{htmlFor:"contained-button-file-".concat(c),children:[Object(u.jsx)(Re.a,{sx:{display:"none"},type:"file",inputProps:{accept:"image/*"},id:"contained-button-file-".concat(c),name:"img",onChange:W,disabled:y}),Object(u.jsx)(p.a,{variant:"contained",component:"span",startIcon:Object(u.jsx)(Je.a,{}),disabled:y,children:"Image Upload"})]})})}),Object(u.jsx)(R.a,{item:!0,xs:12,children:Object(u.jsx)(ue.a,{label:"Description",name:"desc",value:b.desc,onChange:W,fullWidth:!0,multiline:!0,disabled:y})})]})]}),Object(u.jsxs)(Me.a,{children:[Object(u.jsx)(p.a,{onClick:E,disabled:y,children:"Cancel"}),Object(u.jsx)(le.a,{loading:y,onClick:function(){return B.apply(this,arguments)},startIcon:Object(u.jsx)(We.a,{}),children:"Save"})]})]})}var Ye=n(311),Ke=n(290),Ze=n(285),Qe=n(296),Xe=n(297),et=n(317);var tt=function(e){var t=e.open,n=e.setOpen,c=e.category,i=e.menu,s=e.menus,o=e.menuItems,j=e.imageRepository,l=e.editMenu,b=e.customerId,O=Object(a.useState)(i),x=Object(r.a)(O,2),m=x[0],h=x[1],f=Object(a.useState)(!1),g=Object(r.a)(f,2),v=g[0],y=g[1],C=Object(a.useState)(i.img),I=Object(r.a)(C,2),S=I[0],k=I[1],P=Object(a.useState)(),W=Object(r.a)(P,2),E=W[0],B=W[1];function M(e){if("img"!==e.target.name)if("pairs"!==e.target.name){var t=e.target.name,n=e.target.value;h(Object(he.a)(Object(he.a)({},m),{},Object(Le.a)({},t,n)))}else{var a=e.target.value;h(Object(he.a)(Object(he.a)({},m),{},{pairs:a}))}else{var c=e.target.files[0];if(c){var i=URL.createObjectURL(c);return k(i),void B(c)}}}function N(){return(N=Object(ke.a)(Se.a.mark((function e(){var t;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y(!0),!E){e.next=10;break}return e.next=4,j.imageUpload(b,E,[m.menuId,c,m.name]);case 4:return t=e.sent,h(Object(he.a)(Object(he.a)({},m),{},{img:t.secure_url})),l(i,Object(he.a)(Object(he.a)({},m),{},{img:t.secure_url})),n(!1),y(!1),e.abrupt("return");case 10:l(i,Object(he.a)(Object(he.a)({},m),{},{img:S})),n(!1),y(!1);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){n(!1),h(i),k(i.img),B()}return console.log(s),Object(a.useEffect)((function(){h(i),k(i.img)}),[i]),Object(u.jsxs)(oe.a,{open:t,onClose:A,children:[Object(u.jsx)(je.a,{children:"Edit Menu"}),Object(u.jsxs)(Ee.a,{children:[Object(u.jsx)(Be.a,{}),Object(u.jsxs)(R.a,{sx:{mt:1},container:!0,item:!0,spacing:2,alignItems:"center",children:[Object(u.jsx)(R.a,{item:!0,xs:5,children:Object(u.jsx)(ue.a,{required:!0,autoFocus:!0,label:"Menu name",name:"name",value:m.name,fullWidth:!0,onChange:M,disabled:v})}),Object(u.jsx)(R.a,{item:!0,xs:3,children:Object(u.jsxs)(ue.a,{select:!0,label:"Rate",name:"rate",value:m.rate,fullWidth:!0,onChange:M,disabled:v,children:[Object(u.jsx)(w.a,{value:"none",children:"None"},"None"),Object(u.jsx)(w.a,{value:"high",children:"High"},"High"),Object(u.jsx)(w.a,{value:"mid",children:"Mid"},"Mid"),Object(u.jsx)(w.a,{value:"low",children:"Low"},"Low")]})}),Object(u.jsx)(R.a,{item:!0,xs:2,children:Object(u.jsx)(ue.a,{type:"number",label:"Price",name:"price",value:m.price,fullWidth:!0,InputProps:{startAdornment:Object(u.jsx)(_e.a,{position:"start",children:"$"})},onChange:M,disabled:v})}),Object(u.jsx)(R.a,{item:!0,xs:2,children:Object(u.jsx)(ue.a,{type:"number",label:"Price(B)",name:"priceB",value:m.priceB,fullWidth:!0,InputProps:{startAdornment:Object(u.jsx)(_e.a,{position:"start",children:"$"})},onChange:M,disabled:v})}),S&&Object(u.jsx)(R.a,{container:!0,item:!0,xs:12,justifyContent:"center",alignItems:"center",children:Object(u.jsx)(R.a,{item:!0,children:Object(u.jsx)("img",{src:S,alt:"",loading:"lazy",style:{width:"300px",borderRadius:4}})})}),Object(u.jsxs)(R.a,{container:!0,item:!0,xs:12,spacing:2,justifyContent:"center",alignItems:"center",children:[Object(u.jsx)(R.a,{item:!0,children:Object(u.jsx)(p.a,{variant:"contained",component:"span",startIcon:Object(u.jsx)(pe.a,{}),onClick:function(){k(""),B(null)},disabled:v,children:"Delete Image"})}),Object(u.jsx)(R.a,{item:!0,children:Object(u.jsxs)("label",{htmlFor:"contained-button-file-".concat(m.menuId),children:[Object(u.jsx)(Re.a,{sx:{display:"none"},type:"file",inputProps:{accept:"image/*"},id:"contained-button-file-".concat(m.menuId),name:"img",onChange:M,disabled:v}),Object(u.jsx)(p.a,{variant:"contained",component:"span",startIcon:Object(u.jsx)(Je.a,{}),disabled:v,children:"Upload"})]})})]}),Object(u.jsx)(R.a,{item:!0,xs:12,children:Object(u.jsx)(ue.a,{label:"Description",name:"desc",value:m.desc,fullWidth:!0,multiline:!0,onChange:M,disabled:v})}),Object(u.jsx)(R.a,{item:!0,xs:12,children:Object(u.jsxs)(Ye.a,{fullWidth:!0,children:[Object(u.jsx)(Ke.a,{id:"best-paired-with-".concat(m.menuId),children:"Best Paired With"}),Object(u.jsx)(Ze.a,{autoWidth:!0,labelId:"best-paired-with-".concat(m.menuId),multiple:!0,value:m.pairs?m.pairs:[],name:"pairs",onChange:M,disabled:v,input:Object(u.jsx)(Qe.a,{label:"Best Paired With"}),renderValue:function(e){return Object(u.jsx)(d.a,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map((function(e){return Object(u.jsx)(Xe.a,{label:o[e].name,onClick:function(){}},e)}))})},MenuProps:{PaperProps:{style:{maxHeight:"400px",maxWidth:"400px",overflow:"auto"}}},children:s.categoryOrder.map((function(e){return[Object(u.jsx)(et.a,{children:e}),s.categories[e].menuOrder&&s.categories[e].menuOrder.map((function(e){return Object(u.jsx)(w.a,{value:e,disabled:i.menuId.toString()===e,children:o[e].name},e)}))]}))})]})})]})]}),Object(u.jsxs)(Me.a,{children:[Object(u.jsx)(p.a,{onClick:A,disabled:v,children:"Cancel"}),Object(u.jsx)(le.a,{loading:v,onClick:function(){!function(){N.apply(this,arguments)}()},startIcon:Object(u.jsx)(We.a,{}),children:"Save"})]})]})};var nt=function(e){var t=e.menu,n=e.menus,c=e.type,i=e.editMenu,s=e.deleteMenu,o=Object(a.useState)(!1),j=Object(r.a)(o,2),l=j[0],b=j[1];return Object(u.jsxs)(q.a,{sx:{width:"100%"},children:["edit"===c?Object(u.jsx)(T.a,{title:t.name,subheader:Object(u.jsxs)(f.a,{sx:{mt:1},variant:"subtitle2",children:["$",t.price,t.priceB&&" / $".concat(t.priceB)]}),action:Object(u.jsxs)(d.a,{sx:{ml:1},children:[Object(u.jsx)(v.a,{onClick:function(){i(t.menuId)},children:Object(u.jsx)(m.a,{})}),Object(u.jsx)(v.a,{onClick:function(){s(t.menuId)},children:Object(u.jsx)(pe.a,{})})]})}):Object(u.jsx)(T.a,{title:t.name,action:Object(u.jsxs)(f.a,{sx:{mt:1.5,ml:1},variant:"subtitle2",children:["$",t.price,t.priceB&&" / $".concat(t.priceB)]})}),t.img&&Object(u.jsx)(H.a,{component:"img",height:"150",image:t.img,alt:"No Image"}),Object(u.jsx)(V.a,{children:Object(u.jsx)(f.a,{variant:"body2",color:"text.secondary",children:t.desc})}),t.pairs&&t.pairs.length>0&&Object(u.jsxs)(J.a,{onClick:function(){b(!l)},children:[Object(u.jsx)(_.a,{secondaryAction:Object(u.jsx)(f.a,{variant:"body2",children:"Best Paired With"}),children:Object(u.jsxs)(G.a,{children:[Object(u.jsx)(O.a,{}),Object(u.jsx)(D.a,{})]})}),l?Object(u.jsx)(z.a,{}):Object(u.jsx)($.a,{})]}),Object(u.jsx)(Y.a,{in:l,timeout:"auto",unmountOnExit:!0,children:t.pairs&&t.pairs.map((function(e){return Object(u.jsx)(te,{menu:n[e]},e)}))})]})};function at(e){var t=e.customerId,n=e.menuRepository,c=e.imageRepository,i=Object(a.useState)(),s=Object(r.a)(i,2),o=s[0],j=s[1],l=Object(a.useState)(!0),b=Object(r.a)(l,2),O=b[0],x=b[1],m=Object(a.useState)(!1),h=Object(r.a)(m,2),p=h[0],g=h[1],y=Object(a.useState)(!1),C=Object(r.a)(y,2),w=C[0],I=C[1],S=Object(a.useState)(!1),k=Object(r.a)(S,2),P=k[0],W=k[1],E=Object(a.useState)(!1),B=Object(r.a)(E,2),M=B[0],N=B[1],A=Object(a.useState)(),U=Object(r.a)(A,2),L=U[0],F=U[1],D=Object(a.useState)(!1),z=Object(r.a)(D,2),$=z[0],q=z[1],T=Object(a.useState)(),H=Object(r.a)(T,2),V=H[0],J=H[1],_=Object(a.useState)(),G=Object(r.a)(_,2),Y=G[0],K=G[1];function Z(e){g(!0),J(e.target.name)}function Q(e){K(e),I(!0)}function X(){N(!0)}function ee(e){var a=JSON.parse(JSON.stringify(o));a.categoryOrder.forEach((function(t){var n;a.categories[t].menuOrder&&(n=a.categories[t].menuOrder.indexOf(e))>-1&&a.categories[t].menuOrder.splice(n,1)})),delete a.items[e],Object.keys(a.items).forEach((function(t){var n=a.items[t].pairs;if(n){var c=n.indexOf(e);if(!(c>-1))return;a.items[t].pairs.splice(c,1)}})),j(a),n.updateMenus(t,a),K()}function te(e,t){return e.filter((function(e){return!t.includes(e)}))}return Object(a.useEffect)((function(){n.getCustomerInfo(t,(function(e){if(e)return j(e.menus),void x(!1);x(!1)}))}),[t,n]),Object(u.jsx)(ze.a,{onDragEnd:function(e){var a=e.source,c=e.destination,i=e.draggableId,s=e.type;if(c){var r=a.droppableId,l=c.droppableId;if(r!==l||a.index!==c.index){if("category"===s){var d=Array.from(o.categoryOrder);d.splice(a.index,1),d.splice(c.index,0,i);var u=Object(he.a)(Object(he.a)({},o),{},{categoryOrder:d});return j(u),void n.updateMenus(t,u)}if(r===l){var b=o.categories[a.droppableId],O=Array.from(b.menuOrder);O.splice(a.index,1),O.splice(c.index,0,i);var x=Object(he.a)(Object(he.a)({},o),{},{categories:Object(he.a)(Object(he.a)({},o.categories),{},Object(Le.a)({},a.droppableId,Object(he.a)(Object(he.a)({},o.categories[a.droppableId]),{},{menuOrder:O})))});return j(x),void n.updateMenus(t,x)}if(r!==l){var m,h,p=Array.from(o.categories[r].menuOrder);p.splice(a.index,1),(h=o.categories[l].menuOrder?Array.from(o.categories[l].menuOrder):[]).splice(c.index,0,i);var f=Object(he.a)(Object(he.a)({},o),{},{categories:Object(he.a)(Object(he.a)({},o.categories),{},(m={},Object(Le.a)(m,r,Object(he.a)(Object(he.a)({},o.categories[r]),{},{menuOrder:p})),Object(Le.a)(m,l,Object(he.a)(Object(he.a)({},o.categories[l]),{},{menuOrder:h})),m))});j(f),n.updateMenus(t,f)}}}},children:O?Object(u.jsx)(He,{loading:O,text:"Loading Editor..."}):Object(u.jsxs)(R.a,{container:!0,item:!0,justifyContent:"center",children:[Object(u.jsx)(R.a,{item:!0,children:Object(u.jsx)(f.a,{variant:"h5",children:"Menu Editor"})}),Object(u.jsxs)(R.a,{item:!0,xs:12,children:[Object(u.jsx)(d.a,{sx:{display:"flex",flexWrap:"wrap",width:"100%",p:2,boxSizing:"border-box",gap:2,justifyContent:"center"},children:Object(u.jsx)(ze.c,{droppableId:"total",direction:"horizontal",type:"category",children:function(e){return Object(u.jsxs)(d.a,Object(he.a)(Object(he.a)({},e.droppableProps),{},{ref:e.innerRef,sx:{display:"flex",width:"100%",overflow:"auto",p:2,boxSizing:"border-box",gap:2,justifyContent:"flex-start"},children:[o&&o.categoryOrder&&o.categoryOrder.length>0?o.categoryOrder.map((function(e,t){return Object(u.jsx)(ze.b,{draggableId:e,index:t,children:function(t){return Object(u.jsx)(d.a,Object(he.a)(Object(he.a)(Object(he.a)({},t.draggableProps),t.dragHandleProps),{},{ref:t.innerRef,sx:{mb:2},children:Object(u.jsx)(ze.c,{droppableId:e,type:"menu",children:function(t){return Object(u.jsxs)(d.a,Object(he.a)(Object(he.a)({},t.droppableProps),{},{ref:t.innerRef,sx:{display:"flex",flexDirection:"column",width:"300px",height:"100%",backgroundColor:"#f5f5f5",borderRadius:1,gap:1,p:1,alignItems:"center"},children:[Object(u.jsxs)(d.a,{sx:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(u.jsx)(d.a,{sx:{ml:1},children:Object(u.jsx)(f.a,{children:e})}),Object(u.jsxs)(d.a,{children:[Object(u.jsx)(v.a,{name:e,onClick:function(){!function(e){W(!0),J(e)}(e)},children:Object(u.jsx)(Fe.a,{})}),Object(u.jsx)(v.a,{name:e,onClick:function(){!function(e){q(!0),J(e)}(e)},children:Object(u.jsx)(De.a,{})})]})]}),o.categories[e].menuOrder&&o.categories[e].menuOrder.map((function(e,t){return Object(u.jsx)(ze.b,{draggableId:e.toString(),index:t,children:function(t){return Object(u.jsx)(d.a,Object(he.a)(Object(he.a)(Object(he.a)({sx:{width:"100%"},ref:t.innerRef},t.draggableProps),t.dragHandleProps),{},{children:Object(u.jsx)(nt,{menu:o.items[e],menus:o.items,type:"edit",editMenu:Q,deleteMenu:ee})}))}},e)})),t.placeholder,Object(u.jsx)(le.a,{loading:O,fullWidth:!0,variant:"outlined",startIcon:Object(u.jsx)(Pe.a,{}),name:e,onClick:Z,children:"Add Menu"})]}))}})}))}},e)})):null,e.placeholder,Object(u.jsx)(d.a,{children:Object(u.jsx)(le.a,{loading:O,fullWidth:!0,variant:"outlined",startIcon:Object(u.jsx)(Pe.a,{}),onClick:X,children:"Add Category"})})]}))}})}),V&&Object(u.jsx)(Ge,{open:p,setOpen:g,category:V,customerId:t,imageRepository:c,addMenu:function(e){n.updateMenus(t,e),n.getCustomerInfo(t,(function(e){if(e)return j(e.menus),void x(!1);x(!1)}))},menus:o}),Y&&Object(u.jsx)(tt,{open:w,setOpen:I,category:V,menu:o.items[Y],menus:o,menuItems:o.items,imageRepository:c,editMenu:function(e,a){var c,i;e.pairs||a.pairs?(n.updateMenu(t,e.menuId,a),e.pairs?a.pairs?(i=te(e.pairs,a.pairs),c=te(a.pairs,e.pairs)):i=e.pairs:c=a.pairs,n.getCustomerInfo(t,(function(e){c&&c.length>0&&c.forEach((function(t){var n=e.menus.items[t].pairs;n?n.push("".concat(a.menuId)):e.menus.items[t].pairs=["".concat(a.menuId)]})),i&&i.length>0&&i.forEach((function(t){var n=e.menus.items[t].pairs;if(n){var c=n.indexOf("".concat(a.menuId));c>-1&&e.menus.items[t].pairs.splice(c,1)}})),n.updateMenus(t,e.menus),j(e.menus),K()}))):(n.updateMenu(t,e.menuId,a),n.getCustomerInfo(t,(function(e){j(e.menus)})),K())},customerId:t}),V&&Object(u.jsx)(qe,{open:P,setOpen:W,category:V,editCategory:function(e,a){var c=JSON.parse(JSON.stringify(o));if(a in c.categories)F(!0);else{var i=c.categories[e];delete c.categories[e],c.categories[a]=i;var s=c.categoryOrder.indexOf(e);s>-1&&(c.categoryOrder.splice(s,1),c.categoryOrder.splice(s,0,a)),n.updateMenus(t,c),j(c)}}}),Object(u.jsx)(Ae,{open:$,setDeleteAlertOpen:q,deleteFn:function(){var e=JSON.parse(JSON.stringify(o));e.categories[V].menuOrder&&e.categories[V].menuOrder.forEach((function(t){delete e.items[t],Object.keys(e.items).forEach((function(n){var a=e.items[n].pairs;if(a){var c=a.indexOf(t);if(!(c>-1))return;e.items[n].pairs.splice(c,1)}}))})),delete e.categories[V];var a=e.categoryOrder.indexOf(V);a>-1&&e.categoryOrder.splice(a,1),n.updateMenus(t,e),j(e)},text:"Are you sure you want to delete this category and the menus in this category?"}),Object(u.jsx)($e,{open:M,setOpen:N,addCategory:function(e){var a;if(o){if(a=JSON.parse(JSON.stringify(o)),e in o.categories)return void F(!0)}else a={};if(!a.categories&&!a.categoryOrder)return a.categories=Object(Le.a)({},e,{type:"category",menuOrder:[]}),a.categoryOrder=[],a.categoryOrder.push(e),n.updateMenus(t,a),void j(a);a.categories[e]={type:"category"},a.categoryOrder.push(e),n.updateMenus(t,a),j(a)}}),Object(u.jsx)(Ne.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:L,autoHideDuration:3e3,onClose:function(){F(!1)},children:Object(u.jsx)(de.a,{severity:"error",children:"Category Name already Exists"})})]})]})})}var ct=n(279),it=n(278);function st(e){var t=e.open,n=e.setOpen,c=e.menuRepository,i=Object(a.useState)(),s=Object(r.a)(i,2),o=s[0],j=s[1],l=Object(a.useState)(),b=Object(r.a)(l,2),O=b[0],x=b[1],m=Object(a.useState)(!1),h=Object(r.a)(m,2),g=h[0],v=h[1],y=Object(a.useState)({type:"",msg:""}),C=Object(r.a)(y,2),w=C[0],I=C[1];function S(){n(!1)}function k(){v(!1)}function P(e){var t=e.target.name,n=e.target.value;switch(t){case"name":return void x(Object(he.a)(Object(he.a)({},O),{},{name:n}));case"phone":return void x(Object(he.a)(Object(he.a)({},O),{},{phone:n}));case"email":return void x(Object(he.a)(Object(he.a)({},O),{},{email:n}));case"yelp":return void x(Object(he.a)(Object(he.a)({},O),{},{yelp:n}));default:return}}return Object(u.jsxs)(d.a,{children:[Object(u.jsxs)(oe.a,{open:t,onClose:S,children:[Object(u.jsx)(je.a,{children:"Restaurant Go-er"}),Object(u.jsxs)(Ee.a,{children:[Object(u.jsx)(Be.a,{children:"Contact our sales team by submitting this information"}),Object(u.jsxs)(R.a,{sx:{mt:1},container:!0,spacing:2,justifyContent:"center",children:[Object(u.jsx)(R.a,{item:!0,xs:12,children:Object(u.jsx)(f.a,{children:"Full Name"})}),Object(u.jsx)(R.a,{item:!0,xs:12,children:Object(u.jsx)(ue.a,{autoFocus:!0,required:!0,fullWidth:!0,variant:"outlined",label:"Full Name",name:"name",onChange:P})}),Object(u.jsx)(R.a,{item:!0,xs:12,children:Object(u.jsx)(f.a,{children:"Phone"})}),Object(u.jsx)(R.a,{item:!0,xs:12,children:Object(u.jsx)(ue.a,{required:!0,fullWidth:!0,type:"tel",variant:"outlined",label:"Phone",name:"phone",onChange:P})}),Object(u.jsx)(R.a,{item:!0,xs:12,children:Object(u.jsx)(f.a,{children:"Email"})}),Object(u.jsx)(R.a,{item:!0,xs:12,children:Object(u.jsx)(ue.a,{required:!0,fullWidth:!0,type:"email",variant:"outlined",label:"Email",name:"email",onChange:P})}),Object(u.jsx)(R.a,{item:!0,xs:12,children:Object(u.jsx)(f.a,{children:"Yelp User Link (Optional)"})}),Object(u.jsx)(R.a,{item:!0,xs:12,children:Object(u.jsx)(ue.a,{disabled:o,fullWidth:!0,type:"url",variant:"outlined",label:"Yelp User Link",name:"yelp",onChange:P})})]})]}),Object(u.jsxs)(Me.a,{children:[Object(u.jsx)(p.a,{onClick:S,disabled:o,children:"Cancel"}),Object(u.jsx)(le.a,{variant:"contained",loading:o,onClick:function(){!function(){if(!O||!O.name||!O.phone||!O.email)return I({type:"error",msg:"Please fill in the forms for our sales team to contact you"}),void v(!0);j(!0);var e=Date.now().toString();c.submitGoerForm(e,O),j(!1),I({type:"success",msg:"Your information was sent successfully. Our sales team will contact you shortly!"}),v(!0),n(!1),x()}()},startIcon:Object(u.jsx)(it.a,{}),children:"Submit"})]})]}),w.type&&Object(u.jsx)(Ne.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:g,autoHideDuration:6e3,onClose:k,children:Object(u.jsx)(de.a,{onClose:k,severity:w.type,sx:{width:"100%"},children:w.msg})})]})}function rt(e){var t=e.open,n=e.setOpen,c=e.menuRepository,i=Object(j.f)(),s=Object(a.useState)(),o=Object(r.a)(s,2),l=o[0],b=o[1],O=Object(a.useState)(),x=Object(r.a)(O,2),m=x[0],h=x[1],g=Object(a.useState)(!1),v=Object(r.a)(g,2),y=v[0],C=v[1],w=Object(a.useState)({type:"",msg:""}),I=Object(r.a)(w,2),S=I[0],k=I[1];function P(){n(!1)}function W(){C(!1)}function E(e){var t=e.target.name,n=e.target.value;switch(t){case"businessName":return void h(Object(he.a)(Object(he.a)({},m),{},{businessName:n}));case"ownerName":return void h(Object(he.a)(Object(he.a)({},m),{},{ownerName:n}));case"phone":return void h(Object(he.a)(Object(he.a)({},m),{},{phone:n}));case"email":return void h(Object(he.a)(Object(he.a)({},m),{},{email:n}));case"addressLine1":return void h(Object(he.a)(Object(he.a)({},m),{},{address:Object(he.a)(Object(he.a)({},m.address),{},{addressLine1:n})}));case"addressLine2":return void h(Object(he.a)(Object(he.a)({},m),{},{address:Object(he.a)(Object(he.a)({},m.address),{},{addressLine2:n})}));case"city":return void h(Object(he.a)(Object(he.a)({},m),{},{address:Object(he.a)(Object(he.a)({},m.address),{},{city:n})}));case"state":return void h(Object(he.a)(Object(he.a)({},m),{},{address:Object(he.a)(Object(he.a)({},m.address),{},{state:n})}));case"zipCode":return void h(Object(he.a)(Object(he.a)({},m),{},{address:Object(he.a)(Object(he.a)({},m.address),{},{zipCode:n})}));default:return}}return Object(u.jsxs)(d.a,{children:[Object(u.jsxs)(oe.a,{open:t,onClose:P,children:[Object(u.jsx)(je.a,{children:"Restaurant Owner"}),Object(u.jsxs)(Ee.a,{children:[Object(u.jsx)(Be.a,{children:"Contact our sales team by submitting this information"}),Object(u.jsxs)(R.a,{sx:{mt:1},container:!0,spacing:2,justifyContent:"center",children:[Object(u.jsx)(R.a,{item:!0,xs:12,children:Object(u.jsx)(f.a,{children:"Business Name"})}),Object(u.jsx)(R.a,{item:!0,xs:12,children:Object(u.jsx)(ue.a,{autoFocus:!0,required:!0,fullWidth:!0,variant:"outlined",label:"Business Name",name:"businessName",onChange:E})}),Object(u.jsx)(R.a,{item:!0,xs:12,children:Object(u.jsx)(f.a,{children:"Owner Full Name"})}),Object(u.jsx)(R.a,{item:!0,xs:12,children:Object(u.jsx)(ue.a,{required:!0,fullWidth:!0,variant:"outlined",label:"Owner Full Name",name:"ownerName",onChange:E})}),Object(u.jsx)(R.a,{item:!0,xs:12,children:Object(u.jsx)(f.a,{children:"Phone"})}),Object(u.jsx)(R.a,{item:!0,xs:12,children:Object(u.jsx)(ue.a,{required:!0,fullWidth:!0,type:"tel",variant:"outlined",label:"Phone",name:"phone",onChange:E})}),Object(u.jsx)(R.a,{item:!0,xs:12,children:Object(u.jsx)(f.a,{children:"Email"})}),Object(u.jsx)(R.a,{item:!0,xs:12,children:Object(u.jsx)(ue.a,{required:!0,fullWidth:!0,type:"email",variant:"outlined",label:"Email",name:"email",onChange:E})}),Object(u.jsx)(R.a,{item:!0,xs:12,children:Object(u.jsx)(f.a,{children:"Location"})}),Object(u.jsx)(R.a,{item:!0,xs:12,children:Object(u.jsx)(ue.a,{disabled:l,fullWidth:!0,variant:"outlined",label:"Address Line1",name:"addressLine1",onChange:E})}),Object(u.jsx)(R.a,{item:!0,xs:12,children:Object(u.jsx)(ue.a,{disabled:l,fullWidth:!0,variant:"outlined",label:"Address Line2",name:"addressLine2",onChange:E})}),Object(u.jsx)(R.a,{item:!0,xs:12,children:Object(u.jsx)(ue.a,{disabled:l,fullWidth:!0,variant:"outlined",label:"City",name:"city",onChange:E})}),Object(u.jsx)(R.a,{item:!0,xs:12,children:Object(u.jsx)(ue.a,{disabled:l,fullWidth:!0,variant:"outlined",label:"State",name:"state",onChange:E})}),Object(u.jsx)(R.a,{item:!0,xs:12,children:Object(u.jsx)(ue.a,{disabled:l,fullWidth:!0,variant:"outlined",label:"ZIP Code",name:"zipCode",onChange:E})})]})]}),Object(u.jsxs)(Me.a,{children:[Object(u.jsx)(p.a,{onClick:P,disabled:l,children:"Cancel"}),Object(u.jsx)(le.a,{variant:"contained",loading:l,onClick:function(){!function(){if(!m||!m.businessName||!m.ownerName||!m.phone||!m.email)return k({type:"error",msg:"Please fill in the forms for our sales team to contact you"}),C(!0),void setTimeout((function(){i("/login")}),2e3);b(!0);var e=Date.now().toString();c.submitOwnerForm(e,m),b(!1),k({type:"success",msg:"Your information was sent successfully. Our sales team will contact you shortly!"}),C(!0),n(!1),h(),setTimeout((function(){i("/login")}),3e3)}()},startIcon:Object(u.jsx)(it.a,{}),children:"Submit"})]})]}),S.type&&Object(u.jsx)(Ne.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:y,autoHideDuration:6e3,onClose:W,children:Object(u.jsx)(de.a,{onClose:W,severity:S.type,sx:{width:"100%"},children:S.msg})})]})}function ot(e){var t=e.menuRepository,n=Object(a.useState)(!1),c=Object(r.a)(n,2),i=c[0],s=c[1],o=Object(a.useState)(!1),l=Object(r.a)(o,2),b=l[0],x=l[1],m=Object(j.f)();return Object(u.jsxs)(d.a,{sx:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(u.jsxs)(d.a,{sx:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[Object(u.jsx)(d.a,{sx:{m:2,ml:3},children:Object(u.jsx)(p.a,{sx:{color:"black"},startIcon:Object(u.jsx)(O.a,{}),onClick:function(){m("/")},children:Object(u.jsx)(f.a,{children:"Pairable"})})}),Object(u.jsx)(d.a,{sx:{m:2,mr:3},children:Object(u.jsx)(p.a,{sx:{color:"black"},startIcon:Object(u.jsx)(ct.a,{}),onClick:function(){m("/login")},children:Object(u.jsx)(f.a,{children:"Login"})})})]}),Object(u.jsx)(d.a,{sx:{width:"100vw",height:"90vh",display:"flex",justifyContent:"center",alignItems:"center"},children:Object(u.jsx)(d.a,{children:Object(u.jsxs)(R.a,{container:!0,spacing:4,children:[Object(u.jsx)(R.a,{item:!0,xs:6,children:Object(u.jsxs)(p.a,{variant:"contained",size:"large",onClick:function(){s(!0)},children:["Restaurant",Object(u.jsx)("br",{}),"Owner?"]})}),Object(u.jsx)(R.a,{item:!0,xs:6,children:Object(u.jsxs)(p.a,{variant:"outlined",size:"large",onClick:function(){x(!0)},children:["Restaurant",Object(u.jsx)("br",{}),"Go-er?"]})})]})})}),Object(u.jsx)(rt,{open:i,setOpen:s,menuRepository:t}),Object(u.jsx)(st,{open:b,setOpen:x,menuRepository:t})]})}function jt(){var e=Object(j.f)();return Object(u.jsxs)(d.a,{sx:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(u.jsxs)(d.a,{sx:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[Object(u.jsx)(d.a,{sx:{m:2,ml:3},children:Object(u.jsx)(p.a,{sx:{color:"black"},startIcon:Object(u.jsx)(O.a,{}),onClick:function(){e("/")},children:Object(u.jsx)(f.a,{children:"Pairable"})})}),Object(u.jsx)(d.a,{sx:{m:2,mr:3},children:Object(u.jsx)(p.a,{sx:{color:"black"},startIcon:Object(u.jsx)(ct.a,{}),onClick:function(){e("/login")},children:Object(u.jsx)(f.a,{children:"Login"})})})]}),Object(u.jsx)(d.a,{sx:{width:"100vw",height:"50vh",display:"flex",justifyContent:"center",alignItems:"center"},children:Object(u.jsxs)(d.a,{sx:{textAlign:"center"},children:[Object(u.jsx)(f.a,{variant:"h5",children:"Error 404"}),Object(u.jsx)(f.a,{variant:"h4",children:"Page Not Found"})]})})]})}var lt=function(e){var t=e.authService,n=e.menuRepository,c=e.imageRepository,i=Object(a.useContext)(dt).user,s=Object(a.useState)(),l=Object(r.a)(s,2),d=l[0],b=l[1],O=Object(a.useState)(),x=Object(r.a)(O,2),m=x[0],h=x[1];return Object(a.useEffect)((function(){n.getClients((function(e){var t=Object.keys(e);h(e),b(t)}))}),[n,i]),Object(u.jsx)(o.a,{children:Object(u.jsxs)(j.c,{children:[Object(u.jsx)(j.a,{exact:!0,path:"/",element:Object(u.jsx)(ot,{menuRepository:n})}),Object(u.jsx)(j.a,{path:"/login",element:Object(u.jsx)(me,{authService:t,menuRepository:n})}),Object(u.jsx)(j.a,{path:"/editor",element:Object(u.jsx)(k,{customerId:i&&i.uid,menuRepository:n,authService:t,component:Object(u.jsx)(at,{customerId:i&&i.uid,menuRepository:n,imageRepository:c})})}),Object(u.jsx)(j.a,{path:"/preview",element:Object(u.jsx)(k,{customerId:i&&i.uid,menuRepository:n,authService:t,component:Object(u.jsx)(re,{user:i&&i,customerId:i&&i.uid,menuRepository:n})})}),Object(u.jsx)(j.a,{path:"/profile",element:Object(u.jsx)(k,{customerId:i&&i.uid,menuRepository:n,authService:t,component:Object(u.jsx)(Ue,{user:i&&i,customerId:i&&i.uid,menuRepository:n,imageRepository:c,authService:t})})}),d&&m&&d.map((function(e){return Object(u.jsx)(j.a,{path:"/menu/".concat(m[e].publicUrl),element:Object(u.jsx)(we,{menuRepository:n,customerId:e,menus:m[e].menus,logo:m[e].logo&&m[e].logo,name:m[e].name})},e)})),Object(u.jsx)(j.a,{path:"*",element:Object(u.jsx)(jt,{})})]})})},dt=c.a.createContext();function ut(e){var t=e.authService,n=e.menuRepository,c=e.imageRepository,i=Object(a.useState)(),s=Object(r.a)(i,2),o=s[0],j=s[1];return Object(u.jsx)(dt.Provider,{value:{user:o,setUser:j},children:Object(u.jsx)(lt,{authService:t,menuRepository:n,imageRepository:c})})}var bt=n(7),Ot=n(11),xt=function(){function e(t){Object(bt.a)(this,e),this.authProvider=t}return Object(Ot.a)(e,[{key:"googleSignInWithRedirect",value:function(){this.authProvider.logInWithRedirect()}},{key:"signInWithEmailPassword",value:function(e,t){return this.authProvider.signInWithEmailAndPassword(e,t)}},{key:"createUserWithEmailAndPassword",value:function(e,t){return this.authProvider.createUserWithEmailAndPassword(e,t)}},{key:"sendPasswordResetEmail",value:function(e){return this.authProvider.sendPasswordResetEmail(e)}},{key:"updatePassword",value:function(e){return this.authProvider.updatePassword(e)}},{key:"deleteUser",value:function(){return this.authProvider.deleteUser()}},{key:"logout",value:function(){return this.authProvider.signOut()}},{key:"getRedirectResult",value:function(){return this.authProvider.getRedirectResult()}},{key:"onAuthChange",value:function(e){this.authProvider.onAuthStateChanged(e)}}]),e}(),mt=n(29),ht=function(){function e(t){Object(bt.a)(this,e),this.database=Object(mt.c)(t)}return Object(Ot.a)(e,[{key:"addMenu",value:function(e,t,n){Object(mt.f)(Object(mt.d)(this.database,"clients/"+e+"/menus/"+n),t)}},{key:"updateMenu",value:function(e,t,n){Object(mt.g)(Object(mt.d)(this.database,"clients/"+e+"/menus/items/"+t),n)}},{key:"getMenu",value:function(e,t,n){var a=Object(mt.d)(this.database);Object(mt.b)(Object(mt.a)(a,"clients/".concat(e,"/menus/items/").concat(t))).then((function(e){e.exists()?n(e.val()):n(null)})).catch((function(e){console.error(e)}))}},{key:"deleteMenu",value:function(e,t){Object(mt.e)(Object(mt.d)(this.database,"clients/"+e+"/menus/"+t))}},{key:"updateMenus",value:function(e,t){Object(mt.g)(Object(mt.d)(this.database,"clients/"+e+"/menus/"),t)}},{key:"updateCategory",value:function(e,t){Object(mt.g)(Object(mt.d)(this.database,"clients/"+e+"/menus/"),t)}},{key:"getClients",value:function(e){var t=Object(mt.d)(this.database);Object(mt.b)(Object(mt.a)(t,"clients/")).then((function(t){if(t.exists()){var n=t.val();e(n)}else e(null)}))}},{key:"getCustomerInfo",value:function(e,t){var n=Object(mt.d)(this.database);Object(mt.b)(Object(mt.a)(n,"clients/".concat(e))).then((function(e){e.exists()?t(e.val()):t(null)})).catch((function(e){console.error(e)}))}},{key:"addCustomerInfo",value:function(e,t){Object(mt.f)(Object(mt.d)(this.database,"clients/"+e),t)}},{key:"updateCustomerInfo",value:function(e,t){Object(mt.g)(Object(mt.d)(this.database,"clients/"+e),t)}},{key:"submitOwnerForm",value:function(e,t){Object(mt.f)(Object(mt.d)(this.database,"submitForm/owner/"+e),t)}},{key:"submitGoerForm",value:function(e,t){Object(mt.f)(Object(mt.d)(this.database,"submitForm/goer/"+e),t)}}]),e}(),pt=function(){function e(){Object(bt.a)(this,e)}return Object(Ot.a)(e,[{key:"imageUpload",value:function(){var e=Object(ke.a)(Se.a.mark((function e(t,n,a){var c,i;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(c=new FormData).append("file",n),c.append("upload_preset","wgjkx4in"),c.append("folder","Menu Creator/".concat(t,"/Menu Photos")),c.append("tags",a),e.next=7,fetch("https://api.cloudinary.com/v1_1/db7ss52zt/image/upload",{method:"POST",body:c});case 7:return i=e.sent,e.next=10,i.json();case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"logoImageUpload",value:function(){var e=Object(ke.a)(Se.a.mark((function e(t,n){var a,c;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("file",n),a.append("upload_preset","wgjkx4in"),a.append("folder","Menu Creator/".concat(t,"/Logo")),e.next=6,fetch("https://api.cloudinary.com/v1_1/db7ss52zt/image/upload",{method:"POST",body:a});case 6:return c=e.sent,e.next=9,c.json();case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),ft=n(134),gt=n(36),vt=new function e(){var t=this;Object(bt.a)(this,e),this.initializeFirebaseApp=function(){return Object(ft.a)(t.firebaseConfig)},this.signInWithRedirect=function(){var e=Object(gt.d)(),t=new gt.a;Object(gt.i)(e,t)},this.signInWithEmailAndPassword=function(e,t){var n=Object(gt.d)();return Object(gt.h)(n,e,t)},this.createUserWithEmailAndPassword=function(e,t){var n=Object(gt.d)();return Object(gt.b)(n,e,t)},this.sendPasswordResetEmail=function(e){var t=Object(gt.d)();return Object(gt.g)(t,e)},this.updatePassword=function(e){var t=Object(gt.d)().currentUser;return Object(gt.k)(t,e)},this.deleteUser=function(){var e=Object(gt.d)().currentUser;return Object(gt.c)(e)},this.signOut=function(){var e=Object(gt.d)();return Object(gt.j)(e)},this.getRedirectResult=function(){var e=Object(gt.d)();return Object(gt.e)(e)},this.onAuthStateChanged=function(e){var t=Object(gt.d)();Object(gt.f)(t,(function(t){e(t)}))},this.firebaseConfig={apiKey:"AIzaSyCt2mIHFWq3tlxp2gWtiVt6x9GIpLPtZnw",authDomain:"menu-creator-35f21.firebaseapp.com",projectId:"menu-creator-35f21",storageBucket:"menu-creator-35f21.appspot.com",appId:"1:312681521941:web:71aefc928cdc87ba237f1c"}},yt=vt.initializeFirebaseApp(),Ct=new xt(vt),wt=new ht(yt),It=new pt;s.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(ut,{authService:Ct,menuRepository:wt,imageRepository:It})}),document.getElementById("root"))}},[[203,1,2]]]);
//# sourceMappingURL=main.6dc9d3b6.chunk.js.map